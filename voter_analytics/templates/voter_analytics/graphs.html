{% extends 'voter_analytics/base.html'  %}
{% load custom_filters %}

{% block title %}
    Graphs List
{% endblock %}

{% block content %}
<div>
    <div class="form-container">
        <h2>Search Form</h2>
        <form action="{% url 'graphs' %}" method="get" class="search-form">
            <table>
                <tr>
                    <th>Party Affiliation</th>
                    <td>
                        <select name="party_affiliation">
                            <option value="">--Select Party--</option>
                            <option value="U">U</option>
                            <option value="D">D</option>
                            <option value="R">R</option>
                            <option value="J">J</option>
                            <option value="A">A</option>
                            <option value="CC">CC</option>
                            <option value="X">X</option>
                            <option value="L">L</option>
                            <option value="Q">Q</option>
                            <option value="S">S</option>
                            <option value="FF">FF</option>
                            <option value="G">G</option>
                            <option value="HH">HH</option>
                            <option value="T">T</option>
                            <option value="AA">AA</option>
                            <option value="GG">GG</option>
                            <option value="Z">Z</option>
                            <option value="O">O</option>
                            <option value="P">P</option>
                            <option value="E">E</option>
                            <option value="V">V</option>
                            <option value="H">H</option>
                            <option value="Y">Y</option>
                            <option value="W">W</option>
                            <option value="EE">EE</option>
                            <option value="K">K</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>Minimum Date of Birth</th>
                    <td>
                        <select name="min_dob">
                            <option value="">--Select Year--</option>
                            {% for year in 1900|custom_range:2023 %}
                                <option value="{{ year }}">{{ year }}</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>Maximum Date of Birth</th>
                    <td>
                        <select name="max_dob">
                            <option value="">--Select Year--</option>
                            {% for year in 1900|custom_range:2023 %}
                                <option value="{{ year }}">{{ year }}</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>Voter Score</th>
                    <td>
                        <select name="voter_score">
                            <option value="">--Select Score--</option>
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>Election Voting</th>
                    <td>
                        <label><input type="checkbox" name="v20state" value="1"> Voted in 2020 State</label><br>
                        <label><input type="checkbox" name="v21town" value="1"> Voted in 2021 Town</label><br>
                        <label><input type="checkbox" name="v21primary" value="1"> Voted in 2021 Primary</label><br>
                        <label><input type="checkbox" name="v22general" value="1"> Voted in 2022 General</label><br>
                        <label><input type="checkbox" name="v23town" value="1"> Voted in 2023 Town</label><br>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="submit" value="Filter"></td>
                </tr>
            </table>
        </form>
    </div>
    
    <div>
        <div>
            <h3>Distribution of Voters by Year of Birth</h3>
            {{ dob_div|safe }}
        </div>

        <div>
            <h3>Distribution of Voters by Party Affiliation</h3>
            {{ pie_div|safe }}
        </div>

        <div>
            <h3>Distribution of Voters by Election Participation</h3>
            {{ election_div|safe }}
        </div>
    </div>
</div>
{% endblock %}
